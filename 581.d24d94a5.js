(self.webpackChunkreact_netease_music=self.webpackChunkreact_netease_music||[]).push([[581],{6663:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var n=t(7757),s=t.n(n),o=t(8926),c=t.n(o),a=t(5485);const i={getAlbum:function(){var e=c()(s().mark((function e(r){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({url:"/album",params:{id:r}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}},7131:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var n=t(7757),s=t.n(n),o=t(8926),c=t.n(o),a=t(5485),i=t(4760),u=t(2689);const l={searchHot:function(){var e=c()(s().mark((function e(){var r,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({url:"/search/hot"});case 2:return t=e.sent,e.abrupt("return",null==t||null===(r=t.result)||void 0===r?void 0:r.hots);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),searchSuggest:function(){var e=c()(s().mark((function e(r){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.keywords,e.next=3,(0,a.Z)({url:"/search/suggest",params:{keywords:t}});case 3:return n=e.sent,e.abrupt("return",n.result);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),search:function(){var e=c()(s().mark((function e(r){var t,n,o,c,l,d,m,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.keywords,n=r.type,o=void 0===n?i.xb.MUSIC:n,c=r.limit,l=void 0===c?u.IV:c,d=r.offset,m=void 0===d?0:d,e.next=3,(0,a.Z)({url:"/search",params:{keywords:t,type:o,limit:l,offset:m}});case 3:return p=e.sent,e.abrupt("return",p.result);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}},743:(e,r,t)=>{"use strict";t.d(r,{Z:()=>c});var n=t(3038),s=t.n(n),o=t(5977);const c=function(){var e=(0,o.TH)().search,r={};return console.log(r),console.log(e),e.substr(1).split("&").reduce((function(e,r){var t=r.split("="),n=s()(t,2),o=n[0],c=n[1];return e[o]=decodeURIComponent(c),e}),r),r}},8581:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>z});var n=t(5893),s=t(7294),o=t(1679),c=t(7757),a=t.n(c),i=t(8926),u=t.n(i),l=t(3038),d=t.n(l),m=t(5977),p=t(4184),f=t.n(p);const v="src-pages-Discovery-Recommendation-Searcher-Words-style-module__root--3y0CF",h="src-pages-Discovery-Recommendation-Searcher-Words-style-module__title--2XMQ5",y="src-pages-Discovery-Recommendation-Searcher-Words-style-module__words--3dvQf",b="src-pages-Discovery-Recommendation-Searcher-Words-style-module__word--3m9gt";const x=function(e){var r=e.title,t=e.words,s=e.onWordClick;return(0,n.jsxs)("div",{className:v,children:[(0,n.jsx)("div",{className:h,children:r}),(0,n.jsx)("div",{className:y,children:null==t?void 0:t.map((function(e){return(0,n.jsx)("span",{className:b,onClick:function(){return s(e)},children:e},e)}))})]})};var g=t(9713),w=t.n(g),_=t(2512);const j={colors:"'~styles/colors.module.css'",tipsColor:"#bababa",borderColor:"#f5f5f5",root:"src-pages-Discovery-Recommendation-Searcher-SearchResult-Item-style-module__root--2vDe2",title:"src-pages-Discovery-Recommendation-Searcher-SearchResult-Item-style-module__title--yUaBt",item:"src-pages-Discovery-Recommendation-Searcher-SearchResult-Item-style-module__item--3Oqs3"};const k=function(e){var r=e.title,t=e.icon,s=e.data,c=e.renderLabel,a=e.onItemClick,i=void 0===a?_.Z:a;return(0,n.jsxs)("div",{className:j.root,children:[(0,n.jsxs)("div",{className:j.title,children:[(0,n.jsx)(o.J,{icon:t}),r]}),(0,n.jsx)("div",{className:j.content,children:s.map((function(e,r){return(0,n.jsx)("div",{className:j.item,onClick:function(){return i(e)},children:c(e)},r)}))})]})};var R=t(6663),S=t(4275),D=t(5749);const C="src-pages-Discovery-Recommendation-Searcher-SearchResult-style-module__empty--2usCJ";function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){w()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var N=s.useContext;const I=function(e){var r,t=e.data,s=N(S.vY),o=t.order,c={songs:{title:"单曲",icon:"music",renderLabel:function(e){return"".concat(e.name," - ").concat(e.artists.map((function(e){return e.name})).join(" / "))},onItemClick:(r=u()(a().mark((function e(r){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.picUrl){e.next=6;break}return e.next=4,R.Z.getAlbum(r.album.id);case 4:n=e.sent,t=null==n?void 0:n.album.blurPicUrl;case 6:s({type:S.aO.PLAY,payload:{musicId:r.id,music:(0,D.lk)(Z(Z({},r),{},{picUrl:t,duration:r.duration/1e3}))}});case 7:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},albums:{title:"专辑",icon:"headset",renderLabel:function(e){var r;return"".concat(e.name," - ").concat(null==e||null===(r=e.artist)||void 0===r?void 0:r.name)}},artists:{title:"歌手",icon:"person",renderLabel:function(e){return"".concat(e.name)}},mvs:{title:"视频",icon:"mobile-video",renderLabel:function(e){return"".concat(e.name," - ").concat(e.artistName)}}};return(0,n.jsxs)("div",{children:[null==o?void 0:o.map((function(e){var r=c[e],s=t[e];return r?(0,n.jsx)(k,Z(Z({},r),{},{data:s}),e):null})),!o&&(0,n.jsx)("div",{className:C,children:"没有结果喔"})]})};var P=t(4135),L=t(1904),W=t(743),H=t(7131),A=t(6773),U=(0,A.V)({key:"__searchHistory",defaultValue:A.P.ARRAY}),E=t(8098);const q={colors:"'~styles/colors.module.css'",borderColor:"#f5f5f5",constants:"'~styles/constants.module.css'",footerHeight:"60px",headerHeight:"50px",searcher:"src-pages-Discovery-Recommendation-Searcher-style-module__searcher--3qxgR",result:"src-pages-Discovery-Recommendation-Searcher-style-module__result--3gyvO",show:"src-pages-Discovery-Recommendation-Searcher-style-module__show--1QCZ1",searchInput:"src-pages-Discovery-Recommendation-Searcher-style-module__searchInput--3oLaG"};var J=s.useEffect,V=s.useState,Y=s.useMemo,M=s.useRef;const Q=function(){var e,r=(0,m.k6)(),t=(0,W.Z)(),s=M(null),c=M(null),i=V(!1),l=d()(i,2),p=l[0],v=l[1],h=V(t.keyword||""),y=d()(h,2),b=y[0],g=y[1],w=(0,P.Z)(H.Z.searchHot),j=d()(w,2),k=j[0],R=j[1],S=(0,P.Z)(H.Z.searchSuggest),D=d()(S,2),C=D[0],O=D[1],Z=C.value;J((function(){R()}),[]),(0,L.Z)(s,(function(){return v(!1)}));var N=function(){var e=u()(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,O({keywords:r});case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),A=function(e){var t;r.push("".concat(E.Z.SEARCH,"?keyword=").concat(e)),function(e){if(e=e.trim()){var r=U.getItem(),t=(r=r.slice(0,10)).findIndex((function(r){return r===e}));t>-1&&r.splice(t,1),r.unshift(e),U.setItem(r)}}(e),v(!1),null===(t=c.current)||void 0===t||t.blur()},Q=function(){var e=u()(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==r.key){e.next=4;break}if(b.trim()){e.next=3;break}return e.abrupt("return");case 3:A(b);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),F=function(e){A(e),g(e)},z=Y((function(){return(0,_.D)(N,500)}),[]);return(0,n.jsxs)("div",{className:q.root,ref:function(e){return s.current=e},children:[(0,n.jsxs)("div",{className:q.searcher,children:[(0,n.jsx)(o.J,{icon:"search",iconSize:14}),(0,n.jsx)("input",{ref:function(e){return c.current=e},placeholder:"搜索",value:b,onFocus:function(){return v(!0)},onChange:function(e){var r=e.target.value;g(r),z(r)},onKeyPress:Q})]}),(0,n.jsx)("div",{className:f()(q.result,p&&q.show),children:Z&&b?(0,n.jsx)(I,{data:Z}):(0,n.jsxs)("div",{children:[(0,n.jsx)(x,{title:"热门搜索",words:null===(e=k.value)||void 0===e?void 0:e.map((function(e){return e.first})),onWordClick:F}),(0,n.jsx)(x,{title:"搜索历史",words:U.getItem(),onWordClick:F})]})})]})};const F={root:"src-pages-Discovery-Recommendation-style-module__root--30wR0",block:"src-pages-Discovery-Recommendation-style-module__block--15qaS",footer:"src-pages-Discovery-Recommendation-style-module__footer--27JYS",operations:"src-pages-Discovery-Recommendation-style-module__operations--2Vw7W"};const z=function(){return(0,n.jsx)("div",{className:F.root,children:(0,n.jsxs)("div",{className:F.operations,children:[(0,n.jsx)(Q,{}),(0,n.jsx)("div",{className:F.githubLogo,onClick:function(){return window.open("https://github.com/uniquemo/react-netease-music")}})]})})}}}]);