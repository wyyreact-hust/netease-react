(self.webpackChunkreact_netease_music=self.webpackChunkreact_netease_music||[]).push([[448],{6663:(e,n,s)=>{"use strict";s.d(n,{Z:()=>o});var t=s(7757),r=s.n(t),i=s(8926),a=s.n(i),l=s(5485);const o={getAlbum:function(){var e=a()(r().mark((function e(n){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)({url:"/album",params:{id:n}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}},6888:(e,n,s)=>{"use strict";s.d(n,{Z:()=>I});var t=s(7757),r=s.n(t),i=s(9713),a=s.n(i),l=s(8926),o=s.n(l),c=s(1679),u=s(5893),d=s(7294),m=s(4184),p=s.n(m),v=s(8387),f=s(2773),y=s(4760),g=s(6663),j=s(2771),b=s(5749),h=s(4275);const x="src-components-MusicList-style-module__alias--OyjvX",_="src-components-MusicList-style-module__operations--l03Mx",O="src-components-MusicList-style-module__index--d0Ufc",N="src-components-MusicList-style-module__isPlaying--A-Utb",w="src-components-MusicList-style-module__name--NLw7W",P="src-components-MusicList-style-module__active--9Jz1_";function D(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function k(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?D(Object(s),!0).forEach((function(n){a()(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}var S=d.useContext;const I=function(e){var n=e.data,s=e.onPlayAll,t=S(h.bp),i=S(h.vY),a=S(h.Hm),l=[{title:"",key:"name",width:"80px",render:function(e,n,s){var r;return(0,u.jsxs)("div",{className:_,children:[t.musicId===n.id?(0,u.jsx)("span",{className:N,children:(0,u.jsx)(c.J,{icon:(null===(r=a.state)||void 0===r?void 0:r.paused)?"volume-off":"volume-up",iconSize:14})}):(0,u.jsx)("span",{className:O,children:(s||0)+1}),(0,u.jsx)(c.J,{icon:"import",iconSize:14})]})}},{title:"音乐标题",key:"name",width:"45%",render:function(e,n){var s=n.alias,r=n.id,i=n.fee;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:p()(w,t.musicId===r&&P),children:[(0,u.jsx)("span",{children:e}),i===y.Zo.VIP&&(0,u.jsx)(f.Z,{})]}),(null==s?void 0:s.length)?(0,u.jsx)("div",{className:x,children:s.join(" ")}):null]})}},{title:"歌手",key:"artists",width:"15%",render:function(e){return null==e?void 0:e.map((function(e){return e.name})).join(" / ")}},{title:"专辑",key:"album",width:"20%",render:function(e){return null==e?void 0:e.name}},{title:"时长",key:"duration",width:"10%",render:function(e){return(0,j.mr)(e/1e3)}}],d=function(){var e=o()(r().mark((function e(n){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.picUrl){e.next=6;break}return e.next=4,g.Z.getAlbum(n.album.id);case 4:a=e.sent,t=null==a?void 0:a.album.blurPicUrl;case 6:i({type:h.aO.PLAY,payload:{musicId:n.id,music:(0,b.lk)(k(k({},n),{},{picUrl:t,duration:n.duration/1e3}))}}),s&&s();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{children:(0,u.jsx)(v.Z,{columns:l,data:n,onDoubleClick:d,isRecordRowDisabled:function(e){return e.status===y.Ou.NOT_FOUND}})})}},1753:(e,n,s)=>{"use strict";s.d(n,{a:()=>t});var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n="";if(e>Math.pow(10,8))n=(e/Math.pow(10,8)).toFixed(3)+"亿";else{if(!(e>Math.pow(10,4)))return e;n=Math.round(e/Math.pow(10,4))+"万"}return n}},6448:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>K});var t=s(8673),r=s(9713),i=s.n(r),a=s(3038),l=s.n(a),o=s(5893),c=s(7294),u=s(5977),d=s(6829),m=s(7635),p=s(4184),v=s.n(p),f=s(2512);const y="src-components-Tabs-style-module__root--3fRmN",g="src-components-Tabs-style-module__tab--272u3",j="src-components-Tabs-style-module__active--8H5oe";var b=c.useState;const h=function(e){var n=e.tabs,s=b(null==n?void 0:n[0].key),t=l()(s,2),r=t[0],i=t[1];return(0,o.jsx)("div",{className:y,children:n.map((function(e){var n=e.label,s=e.key,t=e.renderLabel,a=e.onClick,l=void 0===a?f.Z:a;return(0,o.jsx)("div",{className:v()(g,r===s&&j),onClick:function(){i(s),l(s)},children:n||t&&t()},s)}))})};var x=s(6888),_=s(2771),O=s(1753);const N="src-pages-SonglistDetail-BasicInfo-style-module__root--2FbKN",w="src-pages-SonglistDetail-BasicInfo-style-module__pic--3fOrg",P="src-pages-SonglistDetail-BasicInfo-style-module__info--xwjsb",D="src-pages-SonglistDetail-BasicInfo-style-module__title--31l-6",k="src-pages-SonglistDetail-BasicInfo-style-module__tag--16R-Z",S="src-pages-SonglistDetail-BasicInfo-style-module__name--3xenl",I="src-pages-SonglistDetail-BasicInfo-style-module__creator--1ZBEx",B="src-pages-SonglistDetail-BasicInfo-style-module__avatar--1EeJO",L="src-pages-SonglistDetail-BasicInfo-style-module__operations--fivMP",U="src-pages-SonglistDetail-BasicInfo-style-module__btn--2IiAA",M="src-pages-SonglistDetail-BasicInfo-style-module__detail--3_0qB",Z="src-pages-SonglistDetail-BasicInfo-style-module__label--3x70u";const A=function(e){var n,s,t=e.data,r=e.onPlayAll;return(0,o.jsxs)("div",{className:N,children:[(0,o.jsx)("div",{className:w,children:(null==t?void 0:t.coverImgUrl)&&(0,o.jsx)("img",{src:null==t?void 0:t.coverImgUrl,className:"cover",loading:"lazy"})}),(0,o.jsxs)("div",{className:P,children:[(0,o.jsxs)("div",{className:D,children:[(0,o.jsx)("div",{className:k,children:"歌单"}),(0,o.jsx)("div",{className:S,children:null==t?void 0:t.name})]}),(0,o.jsxs)("div",{className:I,children:[(0,o.jsx)("div",{className:B,children:(null==t||null===(n=t.creator)||void 0===n?void 0:n.avatarUrl)&&(0,o.jsx)("img",{src:"".concat(null==t||null===(s=t.creator)||void 0===s?void 0:s.avatarUrl,"?param=25y25"),loading:"lazy"})}),(0,o.jsx)("div",{className:S,children:null==t?void 0:t.creator.nickname}),(0,o.jsxs)("div",{children:[(0,_.DZ)(null==t?void 0:t.createTime),"创建"]})]}),(0,o.jsx)("div",{className:L,children:(0,o.jsx)("div",{className:U,onClick:function(){return r(!0)},children:"播放全部"})}),(0,o.jsxs)("div",{className:M,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:Z,children:"标签: "}),(null==t?void 0:t.tags.join(" / "))||"--"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:Z,children:"歌曲数: "}),null==t?void 0:t.trackCount,"  ",(0,o.jsx)("span",{className:Z,children:"播放数: "}),(0,O.a)(null==t?void 0:t.playCount)]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:Z,children:"简介: "}),(null==t?void 0:t.description)||"--"]})]})]})]})};var C=s(5749),E=s(8655),T=s.n(E);function z(){var e=T()(["\n  query GetSonglistDetail($id: String!) {\n    getSonglistDetail(id: $id) {\n      songlist {\n        id\n        name\n        coverImgUrl\n        createTime\n        creator {\n          nickname\n          avatarUrl\n        }\n        tags\n        trackCount\n        playCount\n        description\n      }\n      songs {\n        id\n        name\n        fee\n        artists {\n          name\n        }\n        album {\n          id\n          name\n        }\n        duration\n        picUrl\n      }\n    }\n  }\n"]);return z=function(){return e},e}var F=(0,s(3121).ZP)(z()),Y=s(4275);const J={root:"src-pages-SonglistDetail-style-module__root--BPlvP",tabs:"src-pages-SonglistDetail-style-module__tabs--2ns22"};function R(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),s.push.apply(s,t)}return s}function $(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?R(Object(s),!0).forEach((function(n){i()(e,n,s[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}var q=c.useEffect,H=c.useContext,G=[{label:"歌曲列表",key:"songlist"},{label:"评论",key:"comment"}];const K=function(){var e=H(Y.vY),n=(0,u.UO)().songlistId,s=(0,d.useLazyQuery)(F,{onError:function(e){m.yw.error(e.message)}}),r=l()(s,2),i=r[0],a=r[1],c=a.loading,p=a.data,v=null==p?void 0:p.getSonglistDetail,f=null==v?void 0:v.songs;q((function(){i({variables:{id:n}})}),[n]);var y=function(n){var s=f.map((function(e){return(0,C.lk)($($({},e),{},{duration:e.duration/1e3}))}));e({type:Y.aO.SET_PLAY_LIST,payload:{playList:s}}),n&&e({type:Y.aO.PLAY,payload:{musicId:s[0].id,music:s[0]}})};return(0,o.jsx)("div",{className:J.root,children:c?(0,o.jsx)(t.$,{className:"spinner"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:J.basicInfo,children:(0,o.jsx)(A,{data:null==v?void 0:v.songlist,onPlayAll:y})}),(0,o.jsxs)("div",{className:J.content,children:[(0,o.jsx)("div",{className:J.tabs,children:(0,o.jsx)(h,{tabs:G})}),(0,o.jsx)(x.Z,{data:f,onPlayAll:y})]})]})})}}}]);